<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="1347px" preserveAspectRatio="none" style="width:1773px;height:1347px;background:#FFFFFF;" version="1.1" viewBox="0 0 1773 1347" width="1773px" zoomAndPan="magnify"><defs/><g><rect fill="#FFFFFF" height="1115.5342" style="stroke:#181818;stroke-width:1.0;" width="10" x="835" y="179.123"/><rect fill="#FFFFFF" height="575.73" style="stroke:#181818;stroke-width:1.0;" width="10" x="1437.5" y="727.9272"/><rect fill="#FFFFFF" height="168.9224" style="stroke:#181818;stroke-width:1.0;" width="10" x="1608.5" y="973.1025"/><rect height="802.9053" style="stroke:#000000;stroke-width:1.5;fill:none;" width="1757.5" x="10" y="434.499"/><line style="stroke:#181818;stroke-width:0.5;fill:none;stroke-dasharray:5.0,5.0;" x1="69" x2="69" y1="36.29" y2="1312.6572"/><line style="stroke:#181818;stroke-width:0.5;fill:none;stroke-dasharray:5.0,5.0;" x1="335.5" x2="335.5" y1="36.29" y2="1312.6572"/><line style="stroke:#181818;stroke-width:0.5;fill:none;stroke-dasharray:5.0,5.0;" x1="444.5" x2="444.5" y1="36.29" y2="1312.6572"/><line style="stroke:#181818;stroke-width:0.5;fill:none;stroke-dasharray:5.0,5.0;" x1="586.5" x2="586.5" y1="36.29" y2="1312.6572"/><line style="stroke:#181818;stroke-width:0.5;fill:none;stroke-dasharray:5.0,5.0;" x1="695.5" x2="695.5" y1="106.0615" y2="1312.6572"/><line style="stroke:#181818;stroke-width:0.5;fill:none;stroke-dasharray:5.0,5.0;" x1="840" x2="840" y1="147.3516" y2="1312.6572"/><line style="stroke:#181818;stroke-width:0.5;fill:none;stroke-dasharray:5.0,5.0;" x1="926" x2="926" y1="217.7681" y2="1312.6572"/><line style="stroke:#181818;stroke-width:0.5;fill:none;stroke-dasharray:5.0,5.0;" x1="990" x2="990" y1="259.0581" y2="1312.6572"/><line style="stroke:#181818;stroke-width:0.5;fill:none;stroke-dasharray:5.0,5.0;" x1="1103" x2="1103" y1="300.3481" y2="1312.6572"/><line style="stroke:#181818;stroke-width:0.5;fill:none;stroke-dasharray:5.0,5.0;" x1="1314.5" x2="1314.5" y1="598.7764" y2="1312.6572"/><line style="stroke:#181818;stroke-width:0.5;fill:none;stroke-dasharray:5.0,5.0;" x1="1442.5" x2="1442.5" y1="727.4458" y2="1312.6572"/><line style="stroke:#181818;stroke-width:0.5;fill:none;stroke-dasharray:5.0,5.0;" x1="1613.5" x2="1613.5" y1="972.6211" y2="1312.6572"/><line style="stroke:#181818;stroke-width:0.5;fill:none;stroke-dasharray:5.0,5.0;" x1="1724.5" x2="1724.5" y1="36.29" y2="1312.6572"/><rect fill="#E2E2F0" height="30.29" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="99" x="20" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="85" x="27" y="25.3027">orchestrator</text><rect fill="#E2E2F0" height="30.29" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="99" x="20" y="1311.6572"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="85" x="27" y="1331.96">orchestrator</text><rect fill="#E2E2F0" height="30.29" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="88" x="291.5" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="74" x="298.5" y="25.3027">containerd</text><rect fill="#E2E2F0" height="30.29" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="88" x="291.5" y="1311.6572"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="74" x="298.5" y="1331.96">containerd</text><rect fill="#E2E2F0" height="30.29" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="111" x="389.5" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="97" x="396.5" y="25.3027">control plugin</text><rect fill="#E2E2F0" height="30.29" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="111" x="389.5" y="1311.6572"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="97" x="396.5" y="1331.96">control plugin</text><rect fill="#E2E2F0" height="30.29" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="152" x="510.5" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="138" x="517.5" y="25.3027">demux-snapshotter</text><rect fill="#E2E2F0" height="30.29" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="152" x="510.5" y="1311.6572"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="138" x="517.5" y="1331.96">demux-snapshotter</text><rect fill="#E2E2F0" height="30.29" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="47" x="672.5" y="1311.6572"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="33" x="679.5" y="1331.96">shim</text><rect fill="#E2E2F0" height="30.29" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="90" x="795" y="1311.6572"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="76" x="802" y="1331.96">Firecracker</text><rect fill="#E2E2F0" height="30.29" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="56" x="898" y="1311.6572"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="42" x="905" y="1331.96">MMDS</text><rect fill="#E2E2F0" height="30.29" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="53" x="964" y="1311.6572"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="39" x="971" y="1331.96">agent</text><rect fill="#E2E2F0" height="30.29" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="153" x="1027" y="1311.6572"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="139" x="1034" y="1331.96">remote-snapshotter</text><rect fill="#E2E2F0" height="30.29" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="187" x="1221.5" y="1311.6572"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="173" x="1228.5" y="1331.96">docker-credential-mmds</text><rect fill="#E2E2F0" height="30.29" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="48" x="1418.5" y="1311.6572"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="34" x="1425.5" y="1331.96">FUSE</text><rect fill="#E2E2F0" height="30.29" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="136" x="1545.5" y="1311.6572"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="122" x="1552.5" y="1331.96">container process</text><rect fill="#E2E2F0" height="30.29" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="66" x="1691.5" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="52" x="1698.5" y="25.3027">registry</text><rect fill="#E2E2F0" height="30.29" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="66" x="1691.5" y="1311.6572"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="52" x="1698.5" y="1331.96">registry</text><rect fill="#FFFFFF" height="1115.5342" style="stroke:#181818;stroke-width:1.0;" width="10" x="835" y="179.123"/><rect fill="#FFFFFF" height="575.73" style="stroke:#181818;stroke-width:1.0;" width="10" x="1437.5" y="727.9272"/><rect fill="#FFFFFF" height="168.9224" style="stroke:#181818;stroke-width:1.0;" width="10" x="1608.5" y="973.1025"/><polygon fill="#181818" points="433,63.4165,443,67.4165,433,71.4165,437,67.4165" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="69.5" x2="439" y1="67.4165" y2="67.4165"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="86" x="76.5" y="62.6426">create VM $id</text><polygon fill="#181818" points="660.5,92.543,670.5,96.543,660.5,100.543,664.5,96.543" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="445" x2="666.5" y1="96.543" y2="96.543"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="93" x="452" y="91.769">Launch VM $id</text><rect fill="#E2E2F0" height="30.29" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="47" x="672.5" y="75.4165"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="33" x="679.5" y="95.7192">shim</text><polygon fill="#181818" points="783,133.833,793,137.833,783,141.833,787,137.833" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="696" x2="789" y1="137.833" y2="137.833"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="45" x="703" y="133.0591">Launch</text><rect fill="#E2E2F0" height="30.29" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="90" x="795" y="116.7065"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="76" x="802" y="137.0093">Firecracker</text><polygon fill="#181818" points="823,175.123,833,179.123,823,183.123,827,179.123" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="696" x2="829" y1="179.123" y2="179.123"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="120" x="703" y="174.3491">configure and boot</text><polygon fill="#181818" points="886,204.2495,896,208.2495,886,212.2495,890,208.2495" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="845" x2="892" y1="208.2495" y2="208.2495"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="29" x="852" y="203.4756">start</text><rect fill="#E2E2F0" height="30.29" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="56" x="898" y="187.123"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="42" x="905" y="207.4258">MMDS</text><polygon fill="#181818" points="952,245.5396,962,249.5396,952,253.5396,956,249.5396" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="845" x2="958" y1="249.5396" y2="249.5396"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="29" x="852" y="244.7656">start</text><rect fill="#E2E2F0" height="30.29" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="53" x="964" y="228.4131"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="39" x="971" y="248.7158">agent</text><polygon fill="#181818" points="1015,286.8296,1025,290.8296,1015,294.8296,1019,290.8296" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="845" x2="1021" y1="290.8296" y2="290.8296"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="29" x="852" y="286.0557">start</text><rect fill="#E2E2F0" height="30.29" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="153" x="1027" y="269.7031"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="139" x="1034" y="290.0059">remote-snapshotter</text><polygon fill="#181818" points="707,328.1196,697,332.1196,707,336.1196,703,332.1196" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="978.5,328.1196,988.5,332.1196,978.5,336.1196,982.5,332.1196" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="701" x2="984.5" y1="332.1196" y2="332.1196"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="50" x="713" y="327.3457">connect</text><polygon fill="#181818" points="80.5,357.2461,70.5,361.2461,80.5,365.2461,76.5,361.2461" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="74.5" x2="444" y1="361.2461" y2="361.2461"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="73" x="86.5" y="356.4722">VM running</text><polygon fill="#181818" points="433,386.3726,443,390.3726,433,394.3726,437,390.3726" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="69.5" x2="439" y1="390.3726" y2="390.3726"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="145" x="76.5" y="385.5986">Put registry credentials</text><polygon fill="#181818" points="914,415.499,924,419.499,914,423.499,918,419.499" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="445" x2="920" y1="419.499" y2="419.499"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="145" x="452" y="414.7251">Put registry credentials</text><path d="M10,434.499 L84,434.499 L84,441.6255 L74,451.6255 L10,451.6255 L10,434.499 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="802.9053" style="stroke:#000000;stroke-width:1.5;" width="1757.5" x="10" y="434.499"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="29" x="25" y="447.8833">loop</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="120" x="99" y="446.978">["for each container"]</text><polygon fill="#181818" points="323.5,468.752,333.5,472.752,323.5,476.752,327.5,472.752" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="69.5" x2="329.5" y1="472.752" y2="472.752"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="109" x="76.5" y="467.978">prepare snapshot</text><polygon fill="#181818" points="574.5,497.8784,584.5,501.8784,574.5,505.8784,578.5,501.8784" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="335.5" x2="580.5" y1="501.8784" y2="501.8784"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="109" x="342.5" y="497.1045">prepare snapshot</text><polygon fill="#181818" points="597.5,527.0049,587.5,531.0049,597.5,535.0049,593.5,531.0049" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="1091.5,527.0049,1101.5,531.0049,1091.5,535.0049,1095.5,531.0049" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="591.5" x2="1097.5" y1="531.0049" y2="531.0049"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="50" x="603.5" y="526.231">connect</text><polygon fill="#181818" points="1091.5,556.1313,1101.5,560.1313,1091.5,564.1313,1095.5,560.1313" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="586.5" x2="1097.5" y1="560.1313" y2="560.1313"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="109" x="593.5" y="555.3574">prepare snapshot</text><polygon fill="#181818" points="1209.5,585.2578,1219.5,589.2578,1209.5,593.2578,1213.5,589.2578" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1103.5" x2="1215.5" y1="589.2578" y2="589.2578"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="94" x="1110.5" y="584.4839">Get credentials</text><rect fill="#E2E2F0" height="30.29" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="187" x="1221.5" y="568.1313"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="173" x="1228.5" y="588.4341">docker-credential-mmds</text><polygon fill="#181818" points="937,626.5479,927,630.5479,937,634.5479,933,630.5479" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="931" x2="1314" y1="630.5479" y2="630.5479"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="94" x="943" y="625.7739">Get credentials</text><polygon fill="#181818" points="1303,655.6743,1313,659.6743,1303,663.6743,1307,659.6743" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="926" x2="1309" y1="659.6743" y2="659.6743"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="69" x="933" y="654.9004">credentials</text><polygon fill="#181818" points="1114.5,684.8008,1104.5,688.8008,1114.5,692.8008,1110.5,688.8008" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1108.5" x2="1314" y1="688.8008" y2="688.8008"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="69" x="1120.5" y="684.0269">credentials</text><polygon fill="#181818" points="1406.5,713.9272,1416.5,717.9272,1406.5,721.9272,1410.5,717.9272" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1103.5" x2="1412.5" y1="717.9272" y2="717.9272"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="40" x="1110.5" y="713.1533">spawn</text><rect fill="#E2E2F0" height="30.29" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="48" x="1418.5" y="696.8008"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="34" x="1425.5" y="717.1035">FUSE</text><polygon fill="#181818" points="597.5,755.2173,587.5,759.2173,597.5,763.2173,593.5,759.2173" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="591.5" x2="1102.5" y1="759.2173" y2="759.2173"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="91" x="603.5" y="754.4434">snapshot $foo</text><polygon fill="#181818" points="346.5,784.3438,336.5,788.3438,346.5,792.3438,342.5,788.3438" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="340.5" x2="585.5" y1="788.3438" y2="788.3438"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="91" x="352.5" y="783.5698">snapshot $foo</text><polygon fill="#181818" points="80.5,813.4702,70.5,817.4702,80.5,821.4702,76.5,817.4702" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="74.5" x2="334.5" y1="817.4702" y2="817.4702"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="91" x="86.5" y="812.6963">snapshot $foo</text><polygon fill="#181818" points="323.5,842.5967,333.5,846.5967,323.5,850.5967,327.5,846.5967" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="69.5" x2="329.5" y1="846.5967" y2="846.5967"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="242" x="76.5" y="841.8228">run container $bar with snapshot $foo</text><polygon fill="#181818" points="684,871.7231,694,875.7231,684,879.7231,688,875.7231" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="335.5" x2="690" y1="875.7231" y2="875.7231"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="242" x="342.5" y="870.9492">run container $bar with snapshot $foo</text><polygon fill="#181818" points="978.5,900.8496,988.5,904.8496,978.5,908.8496,982.5,904.8496" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="696" x2="984.5" y1="904.8496" y2="904.8496"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="242" x="703" y="900.0757">run container $bar with snapshot $foo</text><polygon fill="#181818" points="1425.5,929.9761,1435.5,933.9761,1425.5,937.9761,1429.5,933.9761" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="990.5" x2="1431.5" y1="933.9761" y2="933.9761"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="136" x="997.5" y="929.2021">mount snapshot $foo</text><polygon fill="#181818" points="1533.5,959.1025,1543.5,963.1025,1533.5,967.1025,1537.5,963.1025" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="990.5" x2="1539.5" y1="963.1025" y2="963.1025"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="82" x="997.5" y="958.3286">start process</text><rect fill="#E2E2F0" height="30.29" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="136" x="1545.5" y="941.9761"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="122" x="1552.5" y="962.2788">container process</text><polygon fill="#181818" points="1458.5,1000.3926,1448.5,1004.3926,1458.5,1008.3926,1454.5,1004.3926" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1452.5" x2="1607.5" y1="1004.3926" y2="1004.3926"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="73" x="1464.5" y="999.6187">access files</text><polygon fill="#181818" points="1458.5,1029.519,1448.5,1033.519,1458.5,1037.519,1454.5,1033.519" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="1712.5,1029.519,1722.5,1033.519,1712.5,1037.519,1716.5,1033.519" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1452.5" x2="1718.5" y1="1033.519" y2="1033.519"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="92" x="1464.5" y="1028.7451">download files</text><polygon fill="#181818" points="1596.5,1058.6455,1606.5,1062.6455,1596.5,1066.6455,1600.5,1062.6455" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1447.5" x2="1602.5" y1="1062.6455" y2="1062.6455"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="137" x="1454.5" y="1057.8716">file content/metadata</text><path d="M1483,1075.6455 L1483,1130.6455 L1603,1130.6455 L1603,1085.6455 L1593,1075.6455 L1483,1075.6455 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M1593,1075.6455 L1593,1085.6455 L1603,1085.6455 L1593,1075.6455 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="69" x="1489" y="1092.998">After some</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="95" x="1489" y="1108.1245">time, container</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="84" x="1489" y="1123.251">process exits</text><polygon fill="#181818" points="1001.5,1138.0249,991.5,1142.0249,1001.5,1146.0249,997.5,1142.0249" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="995.5" x2="1612.5" y1="1142.0249" y2="1142.0249"/><polygon fill="#181818" points="707,1167.1514,697,1171.1514,707,1175.1514,703,1171.1514" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="701" x2="989.5" y1="1171.1514" y2="1171.1514"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="134" x="713" y="1166.3774">container $bar exited</text><polygon fill="#181818" points="346.5,1196.2778,336.5,1200.2778,346.5,1204.2778,342.5,1200.2778" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="340.5" x2="695" y1="1200.2778" y2="1200.2778"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="134" x="352.5" y="1195.5039">container $bar exited</text><polygon fill="#181818" points="80.5,1225.4043,70.5,1229.4043,80.5,1233.4043,76.5,1229.4043" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="74.5" x2="334.5" y1="1229.4043" y2="1229.4043"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="134" x="86.5" y="1224.6304">container $bar exited</text><polygon fill="#181818" points="433,1261.5308,443,1265.5308,433,1269.5308,437,1265.5308" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="69.5" x2="439" y1="1265.5308" y2="1265.5308"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="76" x="76.5" y="1260.7568">stop VM $id</text><polygon fill="#181818" points="828,1290.6572,838,1294.6572,828,1298.6572,832,1294.6572" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="445" x2="834" y1="1294.6572" y2="1294.6572"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="28" x="452" y="1289.8833">stop</text><!--MD5=[fb347a67a61ff4cd922b0f994f080f71]
@startuml
participant orchestrator
participant containerd
participant "control plugin"
participant "demux-snapshotter"

orchestrator -> "control plugin": create VM $id
create shim
"control plugin" -> shim: Launch VM $id
create Firecracker
shim -> Firecracker: Launch
shim -> Firecracker ++ : configure and boot
create MMDS
Firecracker -> MMDS: start
create agent
Firecracker -> agent: start
create "remote-snapshotter"
Firecracker -> "remote-snapshotter": start
"shim" <-> agent: connect
"control plugin" -> orchestrator: VM running

orchestrator -> "control plugin": Put registry credentials
"control plugin" -> MMDS: Put registry credentials


loop "for each container"
orchestrator -> containerd: prepare snapshot
containerd -> "demux-snapshotter": prepare snapshot
"demux-snapshotter" <-> "remote-snapshotter": connect
"demux-snapshotter" -> "remote-snapshotter": prepare snapshot
create "docker-credential-mmds"
"remote-snapshotter" -> "docker-credential-mmds": Get credentials
"docker-credential-mmds" -> MMDS: Get credentials
MMDS -> "docker-credential-mmds": credentials
"docker-credential-mmds" -> "remote-snapshotter": credentials

create FUSE
"remote-snapshotter" -> FUSE : spawn
activate FUSE
"remote-snapshotter" -> "demux-snapshotter": snapshot $foo
"demux-snapshotter" -> containerd: snapshot $foo
containerd -> orchestrator: snapshot $foo
orchestrator -> containerd: run container $bar with snapshot $foo
containerd -> shim: run container $bar with snapshot $foo
shim -> agent: run container $bar with snapshot $foo
agent -> FUSE: mount snapshot $foo
create "container process"
agent -> "container process": start process
activate "container process"
"container process" -> "FUSE": access files
FUSE <-> registry: download files
FUSE -> "container process": file content/metadata
note left of "container process"
After some 
time, container 
process exits
end note
return
agent -> shim: container $bar exited
shim -> containerd: container $bar exited
containerd -> orchestrator: container $bar exited
end
orchestrator -> "control plugin": stop VM $id
"control plugin" -> Firecracker: stop
deactivate Firecracker
@enduml

PlantUML version 1.2022.5(Sat Apr 30 10:55:52 UTC 2022)
(GPLV2 source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>